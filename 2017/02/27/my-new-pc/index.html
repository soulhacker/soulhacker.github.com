<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">    
    <title>我又装了一次机</title> 
    <meta name="description" content="All those innovative, insightful, intelligent, intriguing things.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato:400,400italic,700,700italic" />
    <link rel="stylesheet" href="/css/main.css" />
    
    <link href='/stylesheets/all-59a811c39081ff1a1a7a90aa4876191a.css' media='all' rel='stylesheet' type='text/css'>
    
    <link rel="canonical" href="http://cn.soulhacker.me/2017/02/27/my-new-pc/">
    <link rel="alternate" type="application/rss+xml" title="Paradigm X Feed" href="http://cn.soulhacker.me/feed.xml">
</head>
<body>
    <nav id="top" class="site-navigation">
        <div class="inner">
            <button id="menu-toggle" aria-expanded="false">Menu</button>
            <div class="nav-menu">
                <ul class="menu">
                
                  
                  
                  <li class="">
                    <a class="" href="/">主页</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="/tags/">所有文章</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="/about.html">关于本站</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="http://soulhacker.me">English Articles</a>
                  </li>
                
                </ul>        
            </div><!-- .nav-menu -->
            <a class="subscribe-button fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">Subscribe</span></a>
        </div><!-- .inner -->
    </nav><!-- .site-navigation -->
    <header class="site-header">
        <div class="inner">
            <h1 class="site-title"><a class="logo-text" href="/">Paradigm X</a></h1>
            <p class="site-description">一个灵魂黑客的印象旅程</p>
        </div><!-- .inner -->
    </header>
    <div class="site-content">
    <div class="inner">
        <main class="site-main">
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <h1 class="entry-title">我又装了一次机</h1>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Neo Lee</span> on <time class="published" datetime="2017-02-27">February 27, 2017</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    <p>如题，我又装了一次机。意思是，我自己攒了一台组装电脑，然后自己装了系统，不是一个，而是 Windows 和 Linux 俩。上一次干类似的事大约是 2004 年。</p>

<p>总的感想是：这个行业虽然算不上“一日千里”，但十几年的时间还是改变了不少东西：Windows 再也不是那个每次重启都有可能起不来的玩意儿，Linux 再也不是要折腾一天才能访问中文网站并差强人意地播放音视频的怪兽。然而也有些事情似乎永远也不会变，比如 Mac 无论多么优雅强大，显卡以及显卡的驱动永远跟不上时代——这也是我这次装机的动机：我要深度（wán）学（yóu）习（xì）啊！</p>

<p>本着 <em>一步到位</em> 和 <em>安静小巧</em> 两大原则，装机配置如下：</p>

<ul>
  <li>CPU：<a href="https://item.jd.com/1748176.html">Intel i7-6700k</a></li>
  <li>主板：<a href="https://item.jd.com/2389154.html">ASUS Z170I PRO GAMING (Intel Z170/LGA 1151)</a></li>
  <li>内存：<a href="https://item.jd.com/2966629.html">CORSAIR Vengeance LED DDR4 3000 32GB (16Gx2)</a></li>
  <li>显卡：<a href="https://item.jd.com/3076376.html">GIGABYTE GTX1080 G1 GAMING 8GD</a></li>
  <li>存储：<a href="https://item.jd.com/4173866.html">Samsung 960 EVO 1TB M.2 NVMe</a></li>
  <li>显示器：<a href="https://item.jd.com/1287970.html">Dell P2715Q</a></li>
  <li>机箱：<a href="https://item.jd.com/2902818.html">JONSBO VR1 Mini-ITX</a></li>
  <li>电源：<a href="https://item.jd.com/855414.html">Seasonic X-750</a></li>
  <li>散热器：<a href="https://item.jd.com/2248473.html">NOCTUA NH-U9S</a></li>
</ul>

<!-- more -->

<p>因为核心动机锁定了 GTX1080 和 4K 显示，所以其他配套上就完了，最后正好两万以下搞定（嗯我知道电源有点 overkill…</p>

<p><strong>吐槽时间</strong>：在一个早就没了光驱的时代，华硕和技嘉还是选择光盘来提供驱动和工具，理解不能。</p>

<p>操作系统方面，Windows 没啥好说的，装系统、升级系统、装 Battle.net、装 Steam、装 Origin（对不起你就是台游戏机 (⊙﹏⊙)b</p>

<p>简单扫了下网上的资料，发现搞科学计算和人工智能的人都不折腾，所以就 <a href="http://releases.ubuntu.com/16.04/">Ubuntu 16.04 LTS</a> 了，然后装 NVIDIA 驱动、装 CUDA 和 cuDNN、装 TensorFlow…这个流程里有些 tricky 的陷阱，浪费了我大半天，最后找到的最简单有效的路径如下：</p>

<ul>
  <li>对较新主板的 BIOS（UEFI）和 16.04 LTS，<a href="https://wiki.ubuntu.com/SecurityTeam/SecureBoot">Secure Boot</a> 会阻止加载第三方硬件驱动，有两个选择：简单粗暴的禁用它（Ubuntu 安装程序有提示），或者对第三方驱动进行签名授信，本着不折腾的原则，我直接安装时就把它禁了…</li>
  <li>下载 <a href="https://developer.nvidia.com/cuda-downloads">CUDA Toolkit 8.0</a>，这个页面上针对 Ubuntu 有四个可选的下载选项，其中最好的选项是“deb (network)” 这个，别的都是坑…</li>
  <li>安装这个包并更新索引：</li>
</ul>
<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">sudo dpkg -i cuda-repo-ubuntu1604_8.0.61-1_amd64.deb
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">sudo apt update</div></div></pre></div></figure>

<ul>
  <li>这个时候去 Ubuntu 的系统设置里打开 Software &amp; Updates，在 Additional Drivers 下面可以看到最新 NVIDIA 驱动的选项，选之，会自动安装好，之后需要重启，这个方法可以避开一大堆手工操作的麻烦，是这次装 Ubuntu 感觉比以前进步最大的一点。</li>
  <li>然后就可以风平浪静的：</li>
</ul>
<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">sudo apt-get install cuda</div></div></pre></div></figure>

<ul>
  <li>下载 <a href="https://developer.nvidia.com/cudnn">cuDNN</a> 并安装：</li>
</ul>
<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">tar xvzf cudnn-8.0-linux-x64-v5.1.tgz
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">sudo cp cuda/include/cudnn.h /usr/local/cuda/include/
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/</div></div></pre></div></figure>

<ul>
  <li>TensorFlow 的主站点被墙，所以需要科学上网，或者用国内的镜像站，比如 <a href="https://mirror.tuna.tsinghua.edu.cn/help/tensorflow/">这里</a>，具体安装推荐用 virtualenv 或者 <a href="https://www.continuum.io/downloads">Anaconda</a> 环境都可以：</li>
</ul>
<figure class="code-highlight-figure"><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span><span class="nb">export </span><span class="nv">TF_BINARY_URL</span><span class="o">=</span>https://mirrors.tuna.tsinghua.edu.cn/tensorflow/linux/gpu/tensorflow_gpu-1.0.0-cp27-none-linux_x86_64.whl
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="c"># virtualenv</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span>sudo apt-get install python-pip python-dev python-virtualenv
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span>virtualenv --system-site-packages ~/tensorflow
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span><span class="nb">source</span> ~/tensorflow/bin/activate
</div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="o">(</span>tensorflow<span class="o">)</span><span class="nv">$ </span>pip install --upgrade <span class="nv">$TF_BINARY_URL</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="c"># Anaconda</span>
</div></div><div data-line="10" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span>conda create -n tensorflow
</div></div><div data-line="11" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nv">$ </span><span class="nb">source </span>activate tensorflow
</div></div><div data-line="12" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="o">(</span>tensorflow<span class="o">)</span><span class="nv">$ </span>pip install --ignore-installed --upgrade <span class="nv">$TF_BINARY_URL</span></div></div></pre></div></figure>

<p>最后…图。因为我的显卡是晚了两天到的，所以先装了其他部分用集显启动装的 Windows：</p>

<p><img class="center" src="/images/posts/zion/system-photo-01-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-02-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-03-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-04-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-05-small.jpg" width="800" /></p>

<p>毕竟这么多年了，看到这个画面还是舒了口气：</p>

<p><img class="center" src="/images/posts/zion/system-photo-06-small.jpg" width="800" /></p>

<p>然后显卡来了…</p>

<p><img class="center" src="/images/posts/zion/system-photo-07-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-08-small.jpg" width="800" /></p>

<p><img class="center" src="/images/posts/zion/system-photo-09-small.jpg" width="800" /></p>

<p>回家把服役七年的 iMac 抱到客厅安置好，收拾干净的书桌：</p>

<p><img class="center" src="/images/posts/zion/system-photo-10-small.jpg" width="800" /></p>

<p>闪亮登场：</p>

<p><img class="center" src="/images/posts/zion/system-photo-11-small.jpg" width="800" /></p>

<p>我的 MBP 更没位置放了…</p>

<p><img class="center" src="/images/posts/zion/system-photo-12-small.jpg" width="800" /></p>

<p>Windows 10 桌面：</p>

<p><img class="center" src="/images/posts/zion/desktop-win10.jpg" width="800" /></p>

<p>Ubuntu 桌面：</p>

<p><img class="center" src="/images/posts/zion/desktop-ubuntu.jpg" width="800" /></p>

<p>按照 TensorFlow 的例子画了个 Mandelbrot 集，话说当年在大学写的第一个 Pascal 程序也是画的这个，这算是轮回么……</p>

<p><img class="center" src="/images/posts/zion/mandelbrot.jpg" width="800" /></p>

                </div><!-- .entry-content -->
                <footer class="entry-footer">
                    <div class="share-post">
                        <span>Share</span>
                        <a class="fa-twitter" target="_blank" href="https://twitter.com/intent/tweet?text=%E6%88%91%E5%8F%88%E8%A3%85%E4%BA%86%E4%B8%80%E6%AC%A1%E6%9C%BA&amp;url=http://cn.soulhacker.me/2017/02/27/my-new-pc/"><span class="screen-reader-text">Twitter</span></a>
                        <a class="fa-facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://cn.soulhacker.me/2017/02/27/my-new-pc/&amp;t=%E6%88%91%E5%8F%88%E8%A3%85%E4%BA%86%E4%B8%80%E6%AC%A1%E6%9C%BA"><span class="screen-reader-text">Facebook</span></a>
                        <a class="fa-google-plus" target="_blank" href="http://plus.google.com/share?url=http://cn.soulhacker.me/2017/02/27/my-new-pc/"><span class="screen-reader-text">Google+</span></a>
                    </div><!-- .share-post -->
                    
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#Programming" title="Pages tagged Programming" rel="tag">Programming</a>
                    </div>
                    
                </footer><!-- .entry-footer -->
            </article><!-- .post -->
            <div class="author-box">
                <div class="author-info">
                    <div class="author-avatar" style="background-image: url(/images/author-image.jpg)"><span class="screen-reader-text">Neo Lee's Picture</span></div>
                    <div class="author-details">
                        <h2 class="author-title">About Neo Lee</h2>
                        <p class="author-bio">互联网架构师，产品设计，创业者，终生游戏迷和音乐迷。</p>
                        <span class="author-location"><i class="fa-map-marker" aria-hidden="true"></i> 中国上海</span>
                        <span class="author-website"><i class="fa-chain" aria-hidden="true"></i> <a href="http://cn.soulhacker.me" target="_blank"> http://cn.soulhacker.me</a></span>
                    </div><!-- .author-details -->
                </div><!-- .author-info -->
            </div><!-- .author-box -->
            <nav class="post-navigation">
                <h2 class="screen-reader-text">Post navigation</h2>
                
                <div class="nav-previous">
                    <div class="nav-inside">
                        
                        <div class="nav-before">Previous</div>
                        <div class="nav-title"><a href="/2014/02/28/paradox/">软件开发外传（三篇）</a></div>
                        <div class="nav-date">February 28, 2014</div>
                    </div><!-- .nav-inside -->
                </div><!-- .nav-previous -->
                
                
            </nav><!-- .post-navigation -->
            
        </main><!-- .site-main -->
        <aside class="sidebar">

    
    <section class="widget widget-text">
        <h2 class="widget-title">About Neo Lee</h2>
        <p>互联网架构师，产品设计，创业者，终生游戏迷和音乐迷。</p>
    </section><!-- .widget-text -->
    

    

    
    <section class="widget widget-text">
        <p><a href="http://cn.soulhacker.me" target="_blank"><img src="/images/banner.jpg" alt="Optional Banner Ad" /></a></p>
    </section><!-- .widget-text-->
    

    <section class="widget widget-recent-posts">
        <h2 class="widget-title">Latest Posts</h2>
        <ul class="recent-posts">
            
            <li class="recent-item"><a href="/2017/02/27/my-new-pc/">我又装了一次机</a> <span>February 27, 2017</span></li>
            
            <li class="recent-item"><a href="/2014/02/28/paradox/">软件开发外传（三篇）</a> <span>February 28, 2014</span></li>
            
            <li class="recent-item"><a href="/2014/02/03/hearthstone-fundamentals/">炉石传说入门</a> <span>February 3, 2014</span></li>
            
            <li class="recent-item"><a href="/2013/12/24/merry-christmas/">Merry Christmas, from My iPhone</a> <span>December 24, 2013</span></li>
            
            <li class="recent-item"><a href="/2013/05/02/why-sicp-matters/">译文：为何 SICP 意义重大</a> <span>May 2, 2013</span></li>
            
        </ul><!-- .recent-posts -->
    </section><!-- .widget-recent-posts -->

    <!--Create a sorted array of tags-->
    
    
    <section class="widget widget-tags">
        <h2 class="widget-title">Tags</h2>
        <div class="tagcloud">
            
            <a href="/tags/#Games">Games</a>
            
            <a href="/tags/#Internet">Internet</a>
            
            <a href="/tags/#Photography">Photography</a>
            
            <a href="/tags/#Programming">Programming</a>
            
            <a href="/tags/#Sci-Fi">Sci-Fi</a>
            
            <a href="/tags/#Startup">Startup</a>
            
        </div><!-- .tagcloud -->
    </section><!-- .widget -->

</aside><!-- .sidebar -->
    </div><!-- .inner -->
</div><!-- .site-content -->

    <footer class="site-footer">
    <div class="inner">
        <div class="social-links">
            
            <a href="https://twitter.com/soulhacker" class="fa-twitter square fill-horizontal"><span class="screen-reader-text">Twitter</span></a>
            
            
            <a href="https://www.facebook.com/neo.lee.x" class="fa-facebook square fill-horizontal"><span class="screen-reader-text">Facebook</span></a>
            
            
            
            <a href="https://github.com/neolee" class="fa-github-alt square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
            
            
            
            
            
            <a href="http://instagram.com/soulhacker" class="fa-instagram square fill-horizontal"><span class="screen-reader-text">Instagram</span></a>
            
            
            
            <a class="fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">RSS</span></a>
        </div><!-- .social-links -->
        <div class="site-info">
            &copy; <a href="/">Paradigm X</a> all rights reserved. <br />Powered by <a target="_blank" href="https://jekyllrb.com/">Jekyll</a>. BlogInn theme by <a target="_blank" href="http://justgoodthemes.com/">JustGoodThemes</a>
            <a href="#top" id="top-link" class="fa-chevron-up top-link square fill-horizontal"><span class="screen-reader-text">Back to the top</span></a>
        </div><!-- .site-info -->
    </div><!-- .inner -->
</footer><!-- .site-footer -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script type="text/javascript" src="/js/plugins.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
</body>
</html>
